import Test

# Nested selection inside inline fragment â€” author.{name} tests
# that nested .{} works inside ... on Type { } bodies
pub results = searchConnection(query: "Hello").edges.{
  node.{
    ... on User { name }
    ... on Post { title, author.{name} }
  }
}

pub first = results[0]
pub line = case (first.node) {
  p: Post => p.title + " by " + p.author.name
  u: User => u.name
  else => "other"
}

assert { line == "First Post by John Doe" }
