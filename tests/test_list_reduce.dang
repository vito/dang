# Test list.reduce() method

# Basic sum with integers
pub numbers: [Int!]! = [1, 2, 3, 4, 5]
pub sum: Int! = numbers.reduce(\(acc, x) -> acc + x, 0)
assert { sum == 15 }

# Product with integers
pub product: Int! = numbers.reduce(\(acc, x) -> acc * x, 1)
assert { product == 120 }

# Concatenate strings
pub words: [String!]! = ["hello", " ", "world"]
pub sentence: String! = words.reduce(\(acc, word) -> acc + word, "")
assert { sentence == "hello world" }

# Count elements (alternative to length)
pub count: Int! = numbers.reduce(\(acc, x) -> acc + 1, 0)
assert { count == 5 }

# Find maximum
pub max: Int! = [3, 7, 2, 9, 1].reduce(\(acc, x) -> if x > acc { x } else { acc }, 0)
assert { max == 9 }

# Empty list returns initial value
pub empty: [Int!]! = []
pub empty_sum: Int! = empty.reduce(\(acc, x) -> acc + x, 42)
assert { empty_sum == 42 }

# Single element
pub single: [Int!]! = [5]
pub single_sum: Int! = single.reduce(\(acc, x) -> acc + x, 10)
assert { single_sum == 15 }

# Build a list (reverse)
pub original: [Int!]! = [1, 2, 3]
pub empty_list: [Int!]! = []
pub reversed: [Int!]! = original.reduce(\(acc, x) -> [x] + acc, empty_list)
assert { reversed == [3, 2, 1] }

print("List reduce tests passed!")
