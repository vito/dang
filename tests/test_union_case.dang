# Test case expression with type patterns on unions

type Cat {
	pub name: String!
	pub lives: Int! = 9
}

type Dog {
	pub name: String!
	pub tricks: Int! = 3
}

union Pet = Cat | Dog

# Function that takes a Pet and returns a description
pub describe(pet: Pet!): String! {
	case (pet) {
		c: Cat => c.name + " has " + toString(c.lives) + " lives"
		d: Dog => d.name + " knows " + toString(d.tricks) + " tricks"
	}
}

pub cat = Cat(name: "Whiskers")
pub dog = Dog(name: "Rex", tricks: 5)

assert { describe(cat) == "Whiskers has 9 lives" }
assert { describe(dog) == "Rex knows 5 tricks" }

# Case with else branch
pub describeOrUnknown(pet: Pet!): String! {
	case (pet) {
		c: Cat => "cat: " + c.name
		else => "something else"
	}
}

assert { describeOrUnknown(cat) == "cat: Whiskers" }
assert { describeOrUnknown(dog) == "something else" }

print("Union case discrimination tests passed!")
