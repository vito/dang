# Test reassignment functionality

pub x = 42
pub y = "hello"
pub flag = true

# Test basic reassignment
x = 100
assert { x == 100 }

# Test string reassignment
y = "world"
assert { y == "world" }

# Test boolean reassignment
flag = false
assert { flag == false }

# Test reassignment in blocks
{
  assert("slot inherited type and was assigned locally") { x == 100 }
  x = 200
  assert("slot inherited type and was assigned locally") { x == 200 }
}
assert("does not modify outside of block, because the block cloned") { x == 100 }

pvt fs = {{a: {{b: {{c: 42}}}}}}
fs.a.b.c = 100
assert { fs.a.b.c == 100 }

fs.a.b.c += 50
assert { fs.a.b.c == 150 }

# Test copy-on-write semantics
pvt original = {{a: {{b: {{c: 1}}}}}}
pvt modified = original
modified.a.b.c = 2
assert { original.a.b.c == 1 }
assert { modified.a.b.c == 2 }

print("Reassignment tests passed!")
