# Test explicit `new { ... }` constructor without arguments

# Basic: new with no args, just a body
type Timestamp {
	pub value: Int!

	new {
		self.value = 42
		self
	}
}

assert { Timestamp.value == 42 }

# No-arg constructor with multiple field initializations
type Defaults {
	pub name: String!
	pub count: Int!

	new {
		self.name = "default"
		self.count = 0
		self
	}
}

assert { Defaults.name == "default" }
assert { Defaults.count == 0 }

# No-arg constructor with computed values
type Computed {
	pub label: String!
	let secret: Int!

	new {
		self.label = "a" + "b"
		self.secret = 10 + 20
		self
	}

	pub getSecret: Int! {
		self.secret
	}
}

assert { Computed.label == "ab" }
assert { Computed.getSecret == 30 }

# Bare assignment (no self.) in no-arg constructor
type Simple {
	pub x: Int! = 0

	new {
		x = 99
		self
	}
}

assert { Simple.x == 99 }

print("No-arg constructor tests passed!")
