# directive hover

"""
Marks a field as deprecated.
"""
directive @deprecated(reason: String = "No longer supported") on FIELD_DEFINITION | OBJECT

directive @experimental on FIELD_DEFINITION

type Directives {
  @deprecated(reason: "use new instead")
  pub old: String! { # test: ^kwK => hover: Marks a field as deprecated.
    "old"
  }

  @experimental
  pub beta: String! { # test: ^kwK => hover: directive @experimental on FIELD_DEFINITION
    "beta"
  }
}

# local variable hover
let hello = 42

hello # test: K => hover: Int!

# function hover
"""
Adds two numbers.
"""
pub addNums(x: Int!, y: Int!): Int! {
  x + y
}

addNums # test: K => hover: (x: Int!, y: Int!): Int!

# function with docs
"""
Multiplies two numbers together.
Returns the product of x and y.
"""
pub multiply(x: Int!, y: Int!): Int! {
  x * y
}

multiply # test: K => hover: Multiplies two numbers together

# builtin hover
Dagger.container # test: ^wwK => hover: Container!

# field access hover
Dagger.container.from # test: ^wwwwK => hover: Download a container image

type MyModule {
  pub ctr(address: String!): Container! { # test: ^wK => hover: pub ctr(address: String!): Container!
    container.from(address)
  }

  pub build: File! {
    generated.file("built") # test: ^K => hover: Base with ./hack/generate ran.
  }

  """
  Base with ./hack/generate ran.
  """
  let generated: Container! {
    container.withExec(["./hack/generate"])
  }

  pub buildQualified: Dagger.File! {
    generatedQualified.file("built") # test: ^K => hover: Base with ./hack/generate ran.
  }

  """
  Base with ./hack/generate ran.
  """
  let generatedQualified: Dagger.Container! {
    Dagger.container.withExec(["./hack/generate"])
  }
}

# enum hover
enum Color { RED GREEN BLUE }

Color # test: K => hover: // Values:
Color # test: K => hover: //   RED

# union hover
type Cat { pub name: String! { "cat" } }
type Dog { pub name: String! { "dog" } }
union Pet = Cat | Dog

Pet # test: K => hover: // Members:
Pet # test: K => hover: //   Cat

# object with lexical scope
let obj = {
  """
  Helper value for the object.
  """
  let helper = 42

  pub value: Int! {
    helper # test: ^K => hover: Helper value for the object.
  }
}
